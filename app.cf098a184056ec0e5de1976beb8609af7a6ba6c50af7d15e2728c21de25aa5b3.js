(()=>{document.addEventListener("DOMContentLoaded",()=>{let o=document.querySelector(".mobile-menu-toggle"),c=document.body,i=document.querySelector("#cs-hamburger-nav-id.main-navigation")||document.querySelector(".main-navigation"),l=document.querySelectorAll(".main-navigation, .cs_nav");o&&i&&o.addEventListener("click",e=>{e.stopPropagation();let t=c.classList.toggle("is-mobile-menu-open");o.classList.toggle("is-active",t),o.setAttribute("aria-expanded",t?"true":"false"),c.style.overflow=t?"hidden":"";let n=document.querySelector(".cs_hamburger_header");n&&(t?n.classList.add("cs_active"):n.classList.remove("cs_active")),t||a(i)}),l.forEach(e=>{if(!e)return;e.querySelectorAll(".menu-item.has-children").forEach(n=>{let s=n.querySelector(":scope > a");s&&s.addEventListener("click",function(r){let m=s.getAttribute("href")==="#",p=n.classList.contains("submenu-open");n.classList.contains("has-children")&&(m||!p)&&r.preventDefault(),n.classList.contains("has-children")&&(n.classList.contains("submenu-open")||b(n),n.classList.toggle("submenu-open")),r.stopPropagation()})})}),document.addEventListener("click",e=>{if(c.classList.contains("is-mobile-menu-open")){let s=i&&i.contains(e.target),r=o&&o.contains(e.target),u=e.target.closest(".cs_hamburger_close");if(!s&&!r&&!u){c.classList.remove("is-mobile-menu-open"),o&&(o.classList.remove("is-active"),o.setAttribute("aria-expanded","false")),c.style.overflow="",i&&a(i);let m=document.querySelector(".cs_hamburger_header");m&&m.classList.remove("cs_active")}}let t=!1;l.forEach(s=>{if(!s)return;s.querySelectorAll(".menu-item.has-children.submenu-open").forEach(u=>{u.contains(e.target)&&(t=!0)})});let n=o&&o.contains(e.target);!t&&!n&&l.forEach(s=>{let r=i&&i.contains(e.target);(!c.classList.contains("is-mobile-menu-open")||!r)&&a(s)})}),document.addEventListener("keydown",e=>{if(e.key==="Escape")if(c.classList.contains("is-mobile-menu-open")){c.classList.remove("is-mobile-menu-open"),o&&(o.classList.remove("is-active"),o.setAttribute("aria-expanded","false")),c.style.overflow="",i&&a(i);let t=document.querySelector(".cs_hamburger_header");t&&t.classList.remove("cs_active")}else l.forEach(t=>{t!==i&&a(t)})});function a(e){e&&e.querySelectorAll(".menu-item.has-children.submenu-open").forEach(t=>{t.classList.remove("submenu-open")})}function b(e){let t=e.parentElement;t&&Array.from(t.children).filter(s=>s!==e&&s.classList.contains("menu-item")&&s.classList.contains("has-children")&&s.classList.contains("submenu-open")).forEach(s=>{s.classList.remove("submenu-open"),a(s)})}let d=document.querySelectorAll(".play-button, .list-review-link, .list-play-button"),f="https://go.coinstrikeholdwin.com/SY12N7";d.length>0&&!f&&console.warn("Play buttons found, but referral URL (site.Params.referralBaseUrl) is empty in Hugo config. Play buttons might not redirect correctly."),d.forEach(e=>{e.getAttribute("href")==="/play"&&e.addEventListener("click",function(t){if(t.preventDefault(),!f){console.error("Play button clicked, but referralBaseUrl is empty.");return}window.open(f,"_blank")})}),document.querySelectorAll(".toc-container").forEach(e=>{let t=e.querySelector(".toc-toggle-button"),n=e.querySelector(".toc-content-wrapper");t&&n&&t.addEventListener("click",()=>{let s=e.classList.toggle("is-open");t.setAttribute("aria-expanded",s?"true":"false"),s&&setTimeout(()=>{e.getBoundingClientRect().top<0&&e.scrollIntoView({behavior:"smooth",block:"start"})},360)})})});})();
